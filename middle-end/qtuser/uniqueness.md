# 用户唯一性

## 用户ID

量潮整个体系采用自定义的`qtid`字段和云开发登录鉴权的`uuid`字段为用户ID，用以识别唯一用户。其中：
- 自建服务优先使用`qtid`，以保持内部数据库的一致性，方便使用SQL的join语句直接做数据分析程序，如果传入的数据不包含`qtid`，则调用用户服务API获取。
- 在面向用户的API中，`qtid`或者`uuid`作为`user_id`向外暴露，以方便轻型应用直接接入云开发登录鉴权。
- 云开发不支持的其他第三方应用登录（i.e. 支付宝登录、微博登录等）用`qtid`匹配，使用自建用户服务实现。
- 客户端实现用户鉴权，既可以直接使用云开发快速接入，也可以使用自建服务接入，自建服务主要以打包封装云开发为主。
- 使用公共依赖（i.e. Python，Django）处理用户，把API接口打包在Auth中间件里，并且实现一个User类或者UserSerializer类(内部打包用户服务API)。

## 匿名用户

云开发的匿名用户比Django自带的匿名用户更完善。考虑建一个匹配机制，方便把两边的匿名服务匹配起来。