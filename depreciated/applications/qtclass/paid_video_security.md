# 付费视频资源安全

一些必要的设计及目标人群：
- 用户跑马灯：把用户ID通过明暗水印等形式打在用户播放时，防止录屏。
- 加解密算法：主要防止爬虫等未经APP的请求。
- 商业模式：视频资源插入练习题等机制，让用户不用APP就体验不到完整的服务。**具体方法待讨论。**

## 离线认证/弱网环境

比如，用户A缓存了自己购买的付费视频，希望在离线状态下播放。

这个时候，客户端需要保证：
- 必须在自己的APP里才能播放，缓存未解密的视频即可；
- 必须是这个用户才能访问，在用户离线缓存登录状态的情况下用缓存的用户信息解密Key。客户端RSA算法里可以要包含用户信息，在解密密钥的时候加以认证；或者二次加密认证。
- （难点）如果用户在其他客户端修改了密码，怎么确认用户认证失效呢？如果留这个漏洞，付费用户可以通过此机制给一个离线设备放已经购买的视频。

弱网环境相对容易实现，只需要让解密机制和缓存机制分离，即可适应弱网环境下的用户认证。

**需要一些特定情况下的场景数据（比如，用户在高铁/飞机上多大概率是弱网或者无网、持续多长时间），才能够判断如何设计最优。**


## 参考资料

- 中文介绍文章，关于教育网站视频加密：https://www.jianshu.com/p/659984b05e0c

